model Integration {
  hookId              String @id @map("hook_id") @db.VarChar(255)
  name                String @unique @map("name") @db.VarChar(255)
  githubWebhookSecret String @map("github_webhook_secret") @db.VarChar(255)

  discordWebhooks DiscordWebhook[]
  userId          String           @map("user_id") @db.VarChar(255)
  user            User             @relation(fields: [userId], references: [id])

  @@index([hookId])
  @@map("integrations")
}

model DiscordWebhook {
  discordWebhookURL String @map("discord_webhook_url") @db.VarChar(255)
  hookId            String @map("hook_id") @db.VarChar(255)

  integration Integration @relation(fields: [hookId], references: [hookId])

  @@unique([discordWebhookURL, hookId])
  @@map("discord_webhooks")
}
